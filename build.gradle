/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * To learn more about Gradle by exploring our Samples at https://docs.gradle.org/8.2.1/samples
 */

// not shown => Initialization Phase: gradle scans through settings.gradle to figure out what kind of project it is - single or multi-module
//                  it creates a Project Object for EACH of the projects using build.gradle contents
//                  


//println 'Start' // Configuration phase

/**
See javaGradle for more on Project Object and Tasks

task is a method call
for every task we create there is an associated action (i.e. doLast()): https://docs.gradle.org/current/dsl/org.gradle.api.Task.html
but the below is basically like doing this

project.task(firstTask)
 */
task firstTask{
    def abc = '123'
    println abc
    println project.name
    println name
	println 'Gradle rocks!' // configuration phase (NOT execution phase)
    // doFirst() {
    //     // executed first during execution phase
    //     println 'doFirst'
    // }
    // doLast() {
    //     // executed last during execution phase
    //     println 'doLast'
    // }
}
//println 'End' // Configuration Phase - gradle is going through and preparing tasks that will be executed in execution phase



// often tasks will depend on others - internally this is what's happeneing (and we can do it for our custom tasks as well)

// create a task 
task deployToStaging {
   // println "Deployed to staging" // executed during configuration phase
    // to execute during the build phase -> inside doLast
    doLast() {
        println "Deployed to staging"
    }
}

task deployToProduction {
    doLast() {
        println "Deployed to production"
    }
}

task cleanUp {
    doLast() {
        println "Closed open resources and did other cleanup tasks"
    }
}

// to control timing

deployToProduction.dependsOn deployToStaging // so if we run gradle dTP, dTS will happen first

deployToProduction.finalizedBy cleanUp // and if we run gradle dTP - cleanup will happen right after

// to have certain tasks run by default
defaultTasks "deployToStaging" // if we run 'gradle' without any args this will run as default.